<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Recetas Inteligentes - Dashboard Clustering</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #ff7043;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .container {
      padding: 30px;
    }
    h2 {
      color: #333;
    }
    #clusterGraph {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>
  <header>
    <h1>üçΩÔ∏è Dashboard de Clustering - Recetas Inteligentes</h1>
  </header>

  <div class="container">
    <h2>Visualizaci√≥n de Recetas por Cl√∫ster</h2>
    <div id="clusterGraph"></div>
  </div>

  <script>
    fetch("data/clustering_results.json")
      .then(response => response.json())
      .then(jsonData => {
        const clusters = {};

        jsonData.forEach(row => {
          const cluster = row.cluster;
          if (!clusters[cluster]) {
            clusters[cluster] = { x: [], y: [] };
          }
          clusters[cluster].x.push(row.calories);
          clusters[cluster].y.push(row.protein);
        });

        const plotData = Object.keys(clusters).map((clusterId, i) => {
          const colors = ['#FF5733', '#33C3FF', '#82E0AA', '#FFC300'];
          return {
            x: clusters[clusterId].x,
            y: clusters[clusterId].y,
            mode: 'markers',
            type: 'scatter',
            name: `Cluster ${clusterId}`,
            marker: { size: 12, color: colors[i % colors.length] }
          };
        });

        const layout = {
          title: 'Distribuci√≥n de Recetas por Nutrientes (Calor√≠as vs Prote√≠nas)',
          xaxis: { title: 'Calor√≠as' },
          yaxis: { title: 'Prote√≠na (g)' },
          margin: { t: 50, l: 60, r: 30, b: 60 }
        };

        Plotly.newPlot('clusterGraph', plotData, layout);
      })
      .catch(error => console.error('Error al cargar los datos:', error));
  </script>
</body>
</html>
